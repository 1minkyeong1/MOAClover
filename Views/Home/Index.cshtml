@model MOAClover.Models.ViewModels.ProductListViewModel

@{
    ViewData["Title"] = "모아클로버";
}

<link rel="stylesheet" href="~/css/Index.css" />

@if (User.Identity!.IsAuthenticated)
{
    <div style="color:green; font-weight:bold;">
        로그인됨 : @User.Identity.Name
    </div>
}
else
{
    <div style="color:red;">
        비로그인 상태
    </div>
}

<div class="container">

    <div class="grid">
        @foreach (var p in Model.Products)
        {
            <a href="/Home/Detail?id=@p.ProductId" class="item-link">
                <div class="item">

                    <div class="swiper product-swiper">
                        <div class="swiper-wrapper">
                            @foreach (var img in p.ImageUrls)
                            {
                                <div class="swiper-slide">
                                    <img src="@img" />
                                </div>
                            }
                        </div>
                    </div>

                    <div class="item-name">@p.Name</div>


                    <div class="price-box">
                        <div class="price-row">
                            @if (p.DiscountRate.HasValue)
                            {
                                <div class="discount-badge">
                                    @p.DiscountRate% OFF
                                </div>
                            }

                            <div class="item-price">
                                @p.FinalPrice.ToString("N0") 원
                            </div>

                        </div>
                    </div>

                </div>
            </a>
        }
                
    </div>

    <!-- 🔥 페이징 -->
    <div class="pagination">
        @if (Model.CurrentPage > 1)
        {
            <a href="?page=@(Model.CurrentPage - 1)">◀</a>
        }

        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <a href="?page=@i"
               class="@(i == Model.CurrentPage ? "active" : "")">
                @i
            </a>
        }

        @if (Model.CurrentPage < Model.TotalPages)
        {
            <a href="?page=@(Model.CurrentPage + 1)">▶</a>
        }
    </div>

</div>