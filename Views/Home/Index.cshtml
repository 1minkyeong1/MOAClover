@{
    ViewData["Title"] = "모아클로버";
}

<link rel="stylesheet" href="~/css/index.css" />

<div class="container">

    <!-- 메인 상품 리스트 -->
    <div id="main">
        <div class="grid" id="product-grid"></div>
    </div>

    <!-- 🔥 페이징 UI -->
    <div id="pagination"
         style="text-align:center; margin:25px 0; font-size:18px; cursor:pointer;">
    </div>

</div>


<script>

    /* ==== 상품 배열 ==== */
    const products = [
        { id: 1, name: '제품 1', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' },
        { id: 2, name: '제품 2', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' },
        { id: 3, name: '제품 3', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' },
        { id: 4, name: '제품 4', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' },
        { id: 5, name: '제품 5', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' },
        { id: 6, name: '제품 6', price: '15000원', img: 'https://via.placeholder.com/400x400', desc: '제품 설명입니다.' }
    ];

    /* ==== 설정 ==== */
    const itemsPerPage = 20;
    let currentPage = 1;

    /* ==== 총 페이지 ==== */
    function getTotalPages() {
        return Math.ceil(products.length / itemsPerPage);
    }

    /* ==== 상품 출력 ==== */
    function render() {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = '';

        const start = (currentPage - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const pageProducts = products.slice(start, end);

        pageProducts.forEach((p, i) => {
            grid.innerHTML += `
                <div class="item" onclick="location.href='/Home/Detail?id=${p.id}'">
                    <img src="${p.img}" />
                    <div class="item-name">${p.name}</div>
                    <div class="item-price">${p.price}</div>
                </div>
            `;
        });

        renderPagination();
    }

    /* ==== 페이징 출력 ==== */
    function renderPagination() {
        const totalPages = getTotalPages();
        const paging = document.getElementById('pagination');
        paging.innerHTML = '';

        if (currentPage > 1) {
            paging.innerHTML += `<span onclick="goPage(${currentPage - 1})">◀</span>`;
        }

        for (let i = 1; i <= totalPages; i++) {
            paging.innerHTML += `
                <span onclick="goPage(${i})" class="${i === currentPage ? 'active' : ''}">
                    ${i}
                </span>
            `;
        }

        if (currentPage < totalPages) {
            paging.innerHTML += `<span onclick="goPage(${currentPage + 1})">▶</span>`;
        }
    }

    function goPage(num) {
        currentPage = num;
        render();
    }

    /* 초기 실행 */
    render();


    
</script>
